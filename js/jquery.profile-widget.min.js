(function(e,t,n,r){function o(t,n){this.element=t;this.settings=e.extend({},s,n);this._defaults=s;this._name=i;this.apiurl="https://api.instagram.com/v1/",this.userID=null,this.pictures=[],this.init()}var i="ProfileWidget",s={username:null,clientID:null};o.prototype={init:function(){if(this.settings.username!==null&&this.settings.clientID!==null){e(this.element).addClass("insta-profile-widget").append('<div class="insta-profile-images"><div class="insta-profile-cell insta-profile-picture-slot"></div><div class="insta-profile-cell insta-profile-picture-slot"></div><div class="insta-profile-cell insta-profile-picture-slot"></div><div class="insta-profile-cell insta-profile-picture-slot"></div><div class="insta-profile-cell insta-profile-picture-slot"></div><div class="insta-profile-cell insta-profile-picture-slot"></div></div><div class="insta-profile-details"><div class="insta-profile-icon"></div><div class="insta-profile-avatar"></div><h1 class="insta-profile-username"></h1></div><div class="insta-profile-stats"><div class="insta-profile-stat"><strong></strong>Photos</div><div class="insta-profile-divider"></div><div class="insta-profile-stat"><strong></strong>Followers</div><a href="#" class="insta-profile-btn">View Profile</a></div>').find(".insta-profile-cell:nth-child(3n)").addClass("first");this.sendRequest("users/search",{q:this.settings.username},this.callbackUsername)}else{alert("Username and ClientID must be supplied")}},callbackImages:function(t,n){e.each(t.data,function(e,t){n.pictures.push(t.images.low_resolution.url)});var r=n.pictures.slice(0);var i=1;var s=e(n.element).find(".insta-profile-picture-slot");s.each(function(){if(i<=n.pictures.length){var t=Math.floor(Math.random()*r.length);var o=r[t];r.splice(t,1);var u=s.index(e(this));setTimeout(function(){n.fadeImage(u,o)},200*i);i++}});if(n.pictures.length>6){setInterval(function(){var t=n.pictures.slice(0);s.each(function(){t.splice(t.indexOf(e(this).data("bg")),1)});var r=Math.floor(Math.random()*6);var i=t[Math.floor(Math.random()*t.length)];n.fadeImage(r,i)},5e3)}},callbackUserStats:function(t,n){e(n.element).find(".insta-profile-stat:eq(0) strong").text(t.data.counts.media.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","));e(n.element).find(".insta-profile-stat:eq(1) strong").text(t.data.counts.followed_by.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","));n.sendRequest("users/"+n.userID+"/media/recent/",{count:18},n.callbackImages)},callbackUsername:function(t,n){if(t.data.length>0){n.userID=t.data[0].id;e(n.element).find(".insta-profile-username").text(t.data[0].username);e(n.element).find(".insta-profile-avatar").append('<a href="https://instagram.com/'+t.data[0].username+'"><img src="'+t.data[0].profile_picture+'"></a>');e(n.element).find(".insta-profile-btn").attr("href","https://instagram.com/"+t.data[0].username);n.sendRequest("users/"+n.userID+"/",{},n.callbackUserStats)}else{alert("No user was found")}},sendRequest:function(t,n,r){n.client_id=this.settings.clientID;var i=this;e.ajax({method:"GET",url:this.apiurl+t,data:n,dataType:"jsonp",success:function(e){r(e,i)},error:function(e,t,n){console.log(e);console.log(t);console.log(n)}})},fadeImage:function(t,n){var r=e('<div class="insta-profile-cell-image" style="background-image: url('+n+');"></div>');e(this.element).find(".insta-profile-picture-slot:eq("+t+")").append(r).children(".insta-profile-cell-image").fadeIn(500,function(){e(this).parent().css("background-image","url("+n+")").data("bg",n);e(this).remove()})},destroy:function(){}};e.fn[i]=function(t){var n=arguments;if(t===r||typeof t==="object"){return this.each(function(){if(!e.data(this,"plugin_"+i)){e.data(this,"plugin_"+i,new o(this,t))}})}else if(typeof t==="string"&&t[0]!=="_"&&t!=="init"){var s;this.each(function(){var r=e.data(this,"plugin_"+i);if(r instanceof o&&typeof r[t]==="function"){s=r[t].apply(r,Array.prototype.slice.call(n,1))}if(t==="destroy"){e.data(this,"plugin_"+i,null)}});return s!==r?s:this}}})(jQuery,window,document)